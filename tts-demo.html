<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTS Demo - Microsoft Interview Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
</head>
<body class="bg-gray-100 min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8">üé§ TTS Demo - Microsoft Interview Pro</h1>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- TTS Controls -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold mb-4">üéôÔ∏è Text-to-Speech Controls</h2>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            Enter text to speak:
                        </label>
                        <textarea id="textInput" rows="4" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter text here...">Tell me about yourself and your background in software development.</textarea>
                    </div>
                    
                    <div class="flex space-x-2">
                        <button onclick="speakText()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                            üé§ Speak
                        </button>
                        <button onclick="stopSpeaking()" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                            ‚èπÔ∏è Stop
                        </button>
                        <button onclick="clearText()" class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">
                            üóëÔ∏è Clear
                        </button>
                    </div>
                    
                    <div class="flex space-x-2">
                        <button onclick="setLanguage('en')" class="bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700">
                            üá∫üá∏ English
                        </button>
                        <button onclick="setLanguage('vi')" class="bg-orange-600 text-white px-3 py-1 rounded text-sm hover:bg-orange-700">
                            üáªüá≥ Vietnamese
                        </button>
                    </div>
                </div>
                
                <div id="speakingStatus" class="mt-4 p-3 bg-gray-100 rounded text-sm">
                    Ready to speak...
                </div>
            </div>

            <!-- Interview Question Demo -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold mb-4">üìù Interview Question Demo</h2>
                
                <div class="space-y-4">
                    <div class="bg-gray-50 rounded-lg p-4 relative">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-lg font-semibold text-gray-800">Question:</h4>
                            <div class="flex items-center space-x-2">
                                <button id="demoSpeakButton" onclick="speakDemoQuestion()" class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                                    <i data-feather="volume-2" class="w-4 h-4 inline mr-1"></i>
                                    Speak
                                </button>
                                <button id="demoToggleButton" onclick="toggleDemoText()" class="bg-gray-600 text-white px-3 py-1 rounded text-sm hover:bg-gray-700">
                                    <i data-feather="eye" class="w-4 h-4 inline mr-1"></i>
                                    Show Text
                                </button>
                            </div>
                        </div>
                        
                        <div id="demoQuestionContainer" class="relative">
                            <p id="demoQuestionText" class="text-xl text-gray-700 hidden">Why do you want to work at Microsoft as a Software Engineer?</p>
                            <div id="demoQuestionStatus" class="text-center py-8">
                                <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i data-feather="play" class="w-8 h-8 text-blue-600"></i>
                                </div>
                                <p class="text-gray-600">Question will be spoken automatically</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="space-y-2">
                        <button onclick="loadDemoQuestion(0)" class="w-full bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
                            Load Question 1
                        </button>
                        <button onclick="loadDemoQuestion(1)" class="w-full bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
                            Load Question 2
                        </button>
                        <button onclick="loadDemoQuestion(2)" class="w-full bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
                            Load Question 3
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Voice Settings -->
        <div class="mt-8 bg-white p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4">‚öôÔ∏è Voice Settings</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Rate:</label>
                    <input type="range" id="rateSlider" min="0.5" max="2" step="0.1" value="0.9" class="w-full">
                    <span id="rateValue" class="text-sm text-gray-600">0.9</span>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Pitch:</label>
                    <input type="range" id="pitchSlider" min="0.5" max="2" step="0.1" value="1" class="w-full">
                    <span id="pitchValue" class="text-sm text-gray-600">1.0</span>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Volume:</label>
                    <input type="range" id="volumeSlider" min="0" max="1" step="0.1" value="1" class="w-full">
                    <span id="volumeValue" class="text-sm text-gray-600">1.0</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'en';
        let currentUtterance = null;
        
        const demoQuestions = [
            "Tell me about yourself and your background in software development.",
            "Why do you want to work at Microsoft as a Software Engineer?",
            "Describe a challenging technical problem you solved and how you approached it."
        ];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            feather.replace();
            setupSliders();
        });

        function setupSliders() {
            const rateSlider = document.getElementById('rateSlider');
            const pitchSlider = document.getElementById('pitchSlider');
            const volumeSlider = document.getElementById('volumeSlider');
            
            rateSlider.addEventListener('input', function() {
                document.getElementById('rateValue').textContent = this.value;
            });
            
            pitchSlider.addEventListener('input', function() {
                document.getElementById('pitchValue').textContent = this.value;
            });
            
            volumeSlider.addEventListener('input', function() {
                document.getElementById('volumeValue').textContent = this.value;
            });
        }

        function speakText() {
            const text = document.getElementById('textInput').value;
            if (!text.trim()) {
                updateStatus('Please enter some text to speak.', 'error');
                return;
            }
            
            speakQuestion(text);
        }

        function speakQuestion(questionText) {
            try {
                // Stop any current speech
                speechSynthesis.cancel();
                
                const utterance = new SpeechSynthesisUtterance(questionText);
                utterance.lang = currentLanguage === 'en' ? 'en-US' : 'vi-VN';
                utterance.rate = parseFloat(document.getElementById('rateSlider').value);
                utterance.pitch = parseFloat(document.getElementById('pitchSlider').value);
                utterance.volume = parseFloat(document.getElementById('volumeSlider').value);
                
                currentUtterance = utterance;
                
                // Update UI to show speaking status
                updateSpeakingStatus(true);
                updateStatus('Speaking...', 'speaking');
                
                utterance.onend = () => {
                    updateSpeakingStatus(false);
                    updateStatus('Finished speaking.', 'success');
                };
                
                utterance.onerror = (event) => {
                    console.error('Speech synthesis error:', event);
                    updateSpeakingStatus(false);
                    updateStatus('Speech synthesis failed.', 'error');
                };
                
                speechSynthesis.speak(utterance);
                
            } catch (error) {
                console.error('Speech synthesis error:', error);
                updateSpeakingStatus(false);
                updateStatus('Speech synthesis not supported.', 'error');
            }
        }

        function speakDemoQuestion() {
            const questionText = document.getElementById('demoQuestionText');
            if (questionText && questionText.textContent) {
                speakQuestion(questionText.textContent);
            }
        }

        function stopSpeaking() {
            speechSynthesis.cancel();
            updateSpeakingStatus(false);
            updateStatus('Stopped speaking.', 'info');
        }

        function clearText() {
            document.getElementById('textInput').value = '';
            updateStatus('Text cleared.', 'info');
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            updateStatus(`Language set to ${lang === 'en' ? 'English' : 'Vietnamese'}.`, 'info');
        }

        function toggleDemoText() {
            const questionText = document.getElementById('demoQuestionText');
            const questionStatus = document.getElementById('demoQuestionStatus');
            const toggleButton = document.getElementById('demoToggleButton');
            
            if (questionText && questionStatus) {
                const isHidden = questionText.classList.contains('hidden');
                
                if (isHidden) {
                    // Show text
                    questionText.classList.remove('hidden');
                    questionStatus.classList.add('hidden');
                    toggleButton.innerHTML = '<i data-feather="eye-off" class="w-4 h-4 inline mr-1"></i>Hide Text';
                } else {
                    // Hide text
                    questionText.classList.add('hidden');
                    questionStatus.classList.remove('hidden');
                    toggleButton.innerHTML = '<i data-feather="eye" class="w-4 h-4 inline mr-1"></i>Show Text';
                }
                
                feather.replace();
            }
        }

        function loadDemoQuestion(index) {
            if (index >= 0 && index < demoQuestions.length) {
                const questionText = document.getElementById('demoQuestionText');
                questionText.textContent = demoQuestions[index];
                questionText.classList.add('hidden');
                
                const questionStatus = document.getElementById('demoQuestionStatus');
                questionStatus.classList.remove('hidden');
                
                const toggleButton = document.getElementById('demoToggleButton');
                toggleButton.innerHTML = '<i data-feather="eye" class="w-4 h-4 inline mr-1"></i>Show Text';
                
                feather.replace();
                
                // Auto-speak the question
                setTimeout(() => {
                    speakQuestion(demoQuestions[index]);
                }, 500);
                
                updateStatus(`Loaded question ${index + 1}.`, 'success');
            }
        }

        function updateSpeakingStatus(isSpeaking) {
            const speakButton = document.getElementById('demoSpeakButton');
            
            if (speakButton) {
                if (isSpeaking) {
                    speakButton.innerHTML = '<i data-feather="volume-x" class="w-4 h-4 inline mr-1"></i>Stop';
                    speakButton.className = 'bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700 transition';
                    speakButton.onclick = stopSpeaking;
                } else {
                    speakButton.innerHTML = '<i data-feather="volume-2" class="w-4 h-4 inline mr-1"></i>Speak';
                    speakButton.className = 'bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition';
                    speakButton.onclick = speakDemoQuestion;
                }
                feather.replace();
            }
        }

        function updateStatus(message, type) {
            const statusDiv = document.getElementById('speakingStatus');
            const colors = {
                'success': 'bg-green-100 text-green-800',
                'error': 'bg-red-100 text-red-800',
                'warning': 'bg-yellow-100 text-yellow-800',
                'info': 'bg-blue-100 text-blue-800',
                'speaking': 'bg-purple-100 text-purple-800'
            };
            
            statusDiv.className = `mt-4 p-3 rounded text-sm ${colors[type] || colors.info}`;
            statusDiv.textContent = message;
        }

        // Auto-load first question
        window.onload = function() {
            loadDemoQuestion(0);
        };
    </script>
</body>
</html> 